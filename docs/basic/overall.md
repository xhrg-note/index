## 框架设计


开发框架(以下均指框架和中间件)。

#### 从需求出发。

开发框架首先是从需求出发，包括收集开发人员的需求，自己构思软件需求。比如说RPC框架，需求可能是远程调用，IP固定。也可能是需要有负载均衡的功能，但是功能也未必是必须有的。所以，需要做什么功能，功能1，功能2，功能3。框架的开发，一般也是从简单到深入。可能一个正在使用的框架，只有最简单的功能。经过不断升级，才发展为功能丰富的框架。

#### 设计API

API设计主要是给框架的使用者来使用的，这里可能有一些设计原则，比如说接口升级不能破坏原有接口。更多的细节可以参考一下6大设计原则和23种设计模式。

#### 组件化

一个好的框架，肯定不会几个七零八落的类组合的，而是有具体的组件，比如说网络通讯模块，数据库访问模块，序列化模块。做好组件化，可以让软件更好的扩展。不仅如此，组件化的部分有时候可能会涉及到生命周期管理，比如说spring的bean有销毁回调方法，servlet也有销毁，新建等方法。这些方法都是给使用者在一定时期去做一些事情。

#### 扩展

好的框架都是支持扩展的，比如说序列化。可能第三方人员不想使用jdk序列化，想扩展出自己的序列化方式去替换原有的序列化。这里需要定义可扩展接口。可扩展接口的发现可能会用到SPI这种方式。


#### 过滤器，拦截器，插件

过滤器，拦截器，插件等的功能比较类似，在软件启动和执行过程中的很多个阶段，都可能会用到这些功能。

#### 日志

软件应该支持丰富的日志。

 
## 中间件设计





#### 高可用方案

